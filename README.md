# Hwahea challenge

- ë¦¬íŒ©í† ë§ ì¤‘,,,, ë¬¸ì„œ ì‘ì„± ì¤‘,,,,
- í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì—ì„œ ì§„í–‰í•œ í™”í•´ ì•± ê°œë°œ ì±Œë¦°ì§€
- 2020. 01. 06 ~ 2020. 01. 28
- [https://github.com/hyejineee/Hwahae-Android-challenge](https://github.com/hyejineee/Hwahae-Android-challenge)

## ğŸ™ŒğŸ» ë¬´ì—‡ì„ ë§Œë“¤ì—ˆëŠ”ê°€?

í™”í•´ ì•± ê°œë°œ ì±Œë¦°ì§€ì˜ ê³¼ì œëŠ” ì œê³µí•˜ëŠ” í™”ì¥í’ˆ ì •ë³´ APIë¥¼ í†µí•´ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ê³¼ì œì˜€ë‹¤. ì„¸ë¶€ ê¸°ëŠ¥ìœ¼ë¡œ ë¨¼ì € ë©”ì¸ í™”ë©´ì—ëŠ” í™”ì¥í’ˆ ëª©ë¡ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ ì£¼ì–´ì•¼ í•˜ê³  ë¦¬ìŠ¤íŠ¸ì˜ ì•„ì´í…œì„ í´ë¦­ì‹œ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í–ˆë‹¤. ë˜ ë¦¬ìŠ¤íŠ¸ í™”ë©´ì—ì„œ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ í•„í„°ë¥¼ ì„¤ì •í•  ê²½ìš° ì¡°ê±´ì— ë¶€í•©í•˜ëŠ” í™”ì¥í’ˆì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í–ˆë‹¤.  

## ğŸ¤” ì–´ë–»ê²Œ ë§Œë“¤ì—ˆëŠ”ê°€?

ì˜¤ëœë§Œì— ì•ˆë“œë¡œì´ë“œ ê°œë°œì„ í•˜ë‹ˆ ì—¬ëŸ¬ êµ¬ì¡°ë¥¼ ì°¸ê³ í•˜ë©´ì„œ(~~í´ë¦° ì•„í‚¤í…ì²˜ ì§‘ì°©..~~.) í•˜ë‹¤ê°€  ì—‰ë§ì§„ì°½ì¸ í´ë” êµ¬ì¡°ì™€ ì†ŒìŠ¤ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ ë˜ì—ˆë‹¤. ì±Œë¦°ì§€ê°€ ëë‚œ í›„ì— ë‹¤ì‹œ ì½”ë“œë¥¼ ë³´ë‹ˆ ğŸ¤­ì™œ ì´ë ‡ê²Œ ì§°ì„ê¹Œ...?ğŸ¤­ í•˜ëŠ” ë¶€ë¶„ë“¤ì´ ìƒë‹¹íˆ ë§ì€ ê²ƒ ê°™ë‹¤. 

ê·¸ë˜ì„œ í´ë” êµ¬ì¡°ë¶€í„° ì°¨ë¡€ ì°¨ë¡€ ê³ ì¹˜ë ¤ê³  í•œë‹¤. 

![Hwahea%20challenge/_2020-03-21__11.01.55.png](Hwahea%20challenge/_2020-03-21__11.01.55.png)

ë¦¬íŒ©í† ë§ ì „ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°... (~~ì§€ì €ë¶„í•´~~)

1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš©ì í”Œë¡œìš° 

    í™”ì¥í’ˆì— ëŒ€í•œ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ê¸°ë§Œ í•˜ëŠ” ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì í”Œë¡œìš°ë„ ë§¤ìš° ê°„ë‹¨í•˜ë‹¤. 

    ë¨¼ì € ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ëª¨ë“  íƒ€ì…ì˜ í™”ì¥í’ˆ ë¦¬ìŠ¤íŠ¸ì™€ ê²€ìƒ‰ì°½, í•„í„° ìŠ¤í”¼ë„ˆê°€ ë³´ì¸ë‹¤. ê²€ìƒ‰ê³¼ í•„í„° ì ìš©ì‹œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” í™”ì¥í’ˆì˜ ë¦¬ìŠ¤íŠ¸ê°€ ë³´ì—¬ì§€ê²Œ ë˜ê³  í™”ì¥í’ˆ ë¦¬ìŠ¤íŠ¸ì˜ ì•„ì´í…œì„ í´ë¦­í•˜ë©´ í™”ì¥í’ˆ ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸ê°€ ëœ¬ë‹¤.

    ![ì œì¶œì‹œ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°](./images/ìŠ¤í¬ë¦°ìƒ· 2020-03-21 ì˜¤í›„ 11.01.55.png)

2. ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¡° (â†’ ì˜ì¡´ì„± ë°©í–¥)

    ![Hwahea%20challenge/IMG_64E765B8AF2C-1.jpeg](Hwahea%20challenge/IMG_64E765B8AF2C-1.jpeg)

    viewModelì„ ëŒ€ëŒ€ì ìœ¼ë¡œ ê³ ì³ì•¼ í•  ê²ƒ ê°™ë‹¤...

3. êµ¬í˜„í•œ ê¸°ëŠ¥
    - ê¸°ë³¸ í™”ì¥í’ˆ ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì£¼ê¸°
    - ê²€ìƒ‰ í‚¤ì›Œë“œê°€ ë“¤ì–´ê°€ ìˆëŠ” í™”ì¥í’ˆ ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì£¼ê¸°
    - 
4. ë¦¬íŒ©í† ë§ 

    ![Hwahea%20challenge/_2020-03-21__11.55.49.png](Hwahea%20challenge/_2020-03-21__11.55.49.png)

    ê²½ìš°ì— ë”°ë¼ bodyì— jsonArray,string, jsonObjectì´ ë“¤ì–´ê°„ë‹¤... 

    ê·¸ë˜ì„œ okhttpì— network interceptorë¥¼ ì¶”ê°€í–ˆë‹¤. 

    - ì›ë˜ ì½”ë“œ

            when (statusCode) {
            	  StatusCode.STATUS_ERROR.code -> {
            	      when {
            	          body.toString().contains(BodyMessage.PAGE_ERROR.message) ||
            	                  body.toString().equals(BodyMessage.SKIN_TYPE_ERROR.toString()) -> {
            	              observer.onError(Exception(body.toString()))
            	          }
            	          body.toString().contains(BodyMessage.NO_DATA.message) -> {
            	              observer.onNext(emptyList())
            	              observer.onComplete()
            	          }
            	          else -> observer.onError(Exception(body.toString()))
            	      }
            	
            	  }
            
            	  StatusCode.STATUS_SUCCESS.code -> {
            	      val listType: Type = object :
            	          TypeToken<List<Product?>?>() {}.getType()
            	      val products = Gson().fromJson<List<Product>>(
            	          body,
            	          listType
            	      )
            	      observer.onNext(products)
            	      observer.onComplete()
            	  }
            	  else ->
            	      observer.onError(Exception(body.toString()))
            }

    - ìˆ˜ì • í›„ ì½”ë“œ

            when (r.isSuccessful) {
                true -> {
                    observer.onNext(r.body()?.body?: emptyList())
                    observer.onComplete()
                }
                else -> {
                    when{
                        r.message().contains(BodyMessage.NO_DATA.message) -> {
                            observer.onNext(emptyList())
                            observer.onComplete()
                        }
                        else -> observer.onError(Exception(r.message()))
                    }
                }
            }

            class ResponseInterceptor : Interceptor {
                override fun intercept(chain: Interceptor.Chain): Response =
                    chain.proceed(chain.request()).let {
            
                        val responseStr = it.body()?.string()
            
                        val newResponse = it.newBuilder().apply {
                            val toJson = JSONObject(responseStr)
            
                            when (toJson.getInt("statusCode")) {
                                StatusCode.STATUS_SUCCESS.code ->
                                    this.code(200)
            
                                else -> {
                                    this.code(400)
                                    this.message(toJson["body"].toString())
                                }
                            }
                        }
            
                        newResponse.body(
                            ResponseBody.create(
                                it.body()?.contentType(),
                                responseStr
                            )
                        )
                    }.build()
            }

## ğŸ™‹ğŸ»â€â™€ï¸ ë¬´ì—‡ì„ ë°°ì› ëŠ”ê°€?

- ì•ˆë“œë¡œì´ë“œ í…ŒìŠ¤íŠ¸
- ë¦¬ì•¡í‹°ë¸Œ í”„ë¡œê·¸ë˜ë°

## ğŸ¤¦ğŸ»â€â™€ï¸ ì•„ì‰¬ìš´ ì 

-